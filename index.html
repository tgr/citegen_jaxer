<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Cite Template Generator</title>
        <script runat="server">
          var base_path = "/home/tgr/citegen/";
        </script>
        <script runat="server" src="zotero_orig.js"></script>
        <script runat="server" src="zotero_wrapper.js"></script>
        <script runat="server" src="zotero_l10n.js"></script>
        <script runat="server" src="scrape.js"></script>
    </head>
    <body>
        <h1>Cite Template Generator</h1>
        <div id="results"></div>
        <script runat="server">
          var url = Jaxer.Util.Url.parseUrl(window.location.href).queryParts.url;
          if (!url) document.write('<form><label>URL: <input name="url" size="80" /></label></form>');
          else {
            var citation = generate(url);
            document.write(url + "<br />");
            if (citation.templateType) {
              document.write(citation.scraperLabel + " :: " + citation.templateType);
              document.write("<pre>" + citation.template + "</pre>");
              document.write(var_dump(citation.item));
            } else {
              document.write("<div style='color:red;font-size:large;'>Unknown URL!</div>");
            }
          }
        </script>
    </body>
</html>
